{% extends "base.html" %}
{% block content %}
<div class="card mb-4">
  <div class="card-body">
    <h3>{{ post.title }}</h3>
    <p>{{ post.content }}</p>
  </div>
</div>

<h4>Comments</h4>
<ul class="list-group mb-3">
  {% for comment in comments %}
  <li class="list-group-item">
    {{ comment.content }} <br>
    <small class="text-muted">{{ comment.created_at }}</small>
  </li>
  {% else %}
  <li class="list-group-item">No comments yet.</li>
  {% endfor %}
</ul>

{% if session.get('user_id') %}
<form method="post" action="{{ url_for('comment', post_id=post.id) }}">
  <div class="mb-3">
    <textarea class="form-control" name="content" placeholder="Write a comment..." required></textarea>
  </div>
  <button type="submit" class="btn btn-primary">Add Comment</button>
</form>
{% else %}
<p><a href="{{ url_for('login') }}">Log in</a> to comment.</p>
{% endif %}
{% endblock %}
